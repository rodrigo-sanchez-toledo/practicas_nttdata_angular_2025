<div class="container">
  <h2 i18n="@@form.title">Formulario Reactivo</h2>
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form">
    <!-- Campo Nombre -->
    <div class="form-group">
      <label for="nombre" i18n="@@form.nombre">Nombre:</label>
      <input
        type="text"
        id="nombre"
        aria-invalid="{{ nombre?.invalid && submitted }}"
        aria-describedby="nombreErrors"
        formControlName="nombre"
        class="form-control"
        [class.is-invalid]="nombre?.invalid && submitted"
      />
      <app-form-errors [control]="nombre" [submitted]="submitted" id="nombreErrors"></app-form-errors>
    </div>

    <!-- Campo Email -->
    <div class="form-group">
      <label for="email" i18n="@@form.email">Correo Electrónico:</label>
      <input
        type="email"
        id="email"
        aria-invalid="{{ email?.invalid && submitted }}"
        aria-describedby="emailErrors"
        formControlName="email"
        class="form-control"
        [class.is-invalid]="email?.invalid && submitted"
      />
      <app-form-errors [control]="email" [submitted]="submitted" id="emailErrors"></app-form-errors>
    </div>

    <!-- Campo Edad -->
    <div class="form-group">
      <label for="edad" i18n="@@form.edad">Edad:</label>
      <!-- Usamos input text para evitar flechitas del number, pero indicamos inputmode y pattern -->
      <input
        type="text"
        id="edad"
        inputmode="numeric"
        pattern="[0-9]*"
        min="18"
        max="120"
        aria-invalid="{{ edad?.invalid && submitted }}"
        aria-describedby="edadErrors"
        formControlName="edad"
        class="form-control"
        [class.is-invalid]="edad?.invalid && submitted"
        (input)="keepOnlyDigits($event)"
      />
      <app-form-errors [control]="edad" [submitted]="submitted" id="edadErrors"></app-form-errors>
    </div>

    <!-- Campo Select -->
    <div class="form-group">
      <label for="categoria" i18n="@@form.categoria">Categoría:</label>
      <select
        id="categoria"
        aria-invalid="{{ categoria?.invalid && submitted }}"
        aria-describedby="categoriaErrors"
        formControlName="categoria"
        class="form-control"
        [class.is-invalid]="categoria?.invalid && submitted"
      >
        <option value="" disabled i18n="@@form.selectCategory">Selecciona una categoría</option>
        <option value="administrador" i18n="@@form.admin">Administrador</option>
        <option value="usuario" i18n="@@form.user">Usuario</option>
        <option value="cliente" i18n="@@form.client">Cliente</option>
        <option value="vendedor" i18n="@@form.seller">Vendedor</option>
      </select>
      <app-form-errors [control]="categoria" [submitted]="submitted" id="categoriaErrors"></app-form-errors>
    </div>

    <!-- Botones -->
    <div class="form-buttons">
      <button type="submit" class="btn btn-primary" i18n="@@form.submit">Enviar</button>
      <button type="button" class="btn btn-secondary" (click)="resetForm()" i18n="@@form.reset">Limpiar</button>
    </div>
  </form>

  <!-- Botón de vuelta -->
  <div class="back-button">
    <button type="button" routerLink="/home" class="btn-back" i18n="@@form.backHome">&larr; Volver al inicio</button>
  </div>
</div>
